# Sample Test Configuration for gitwebhooks
#
# This is a template configuration file for testing.
# Placeholders like {port}, {temp_dir}, {log_file} should be replaced
# with actual values at test runtime.

[server]
# Server address - use 127.0.0.1 for testing
address = 127.0.0.1
# Server port - will be dynamically assigned during tests
port = {port}
# Log file path - use temporary directory for testing
log_file = {log_file}

[ssl]
# SSL/TLS configuration - set to true for HTTPS tests
enable = {use_ssl|false}
# Private key file path (only if SSL enabled)
key_file = {key_file}
# Certificate file path (only if SSL enabled)
cert_file = {cert_file}

[github]
# GitHub webhook configuration
# Comma-separated list of events to handle
handle_events = push
# Enable signature verification (set to false for testing without signatures)
verify = {github_verify|false}
# Webhook secret for signature verification
secret = {github_secret|test_secret}

[gitee]
# Gitee webhook configuration
handle_events = Push Hook
verify = {gitee_verify|false}
secret = {gitee_secret|test_secret}

[gitlab]
# GitLab webhook configuration
handle_events = push
verify = {gitlab_verify|false}
secret = {gitlab_secret|test_secret}

[custom]
# Custom webhook platform configuration
# Header name to identify custom webhooks
header_name = X-Custom-Header
# Header value to match
header_value = Custom-Git-Hookshot
# Token header name for verification
header_token = X-Custom-Token
# Event header name (optional)
header_event = X-Custom-Event
# JSON path to extract repository identifier
identifier_path = project.path_with_namespace
# Events to handle
handle_events = push
verify = {custom_verify|false}
secret = {custom_secret|test_secret}

# Test repository configurations
# Format: [owner/repo] or [namespace/project]

[test/repo1]
# Working directory for the repository
cwd = {temp_dir}/repo1
# Command to execute when webhook is received
cmd = touch {temp_dir}/repo1/.test_marker && echo "Webhook received for test/repo1"

[test/repo2]
cwd = {temp_dir}/repo2
cmd = echo "Processing test/repo2" && cd {temp_dir}/repo2 && git pull

[octocat/hello-world]
cwd = {temp_dir}/hello-world
cmd = /path/to/deploy/script.sh

[user/private-repo]
cwd = {temp_dir}/private-repo
cmd = make deploy
